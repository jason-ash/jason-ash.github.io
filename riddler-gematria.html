<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	
	<title>Jason Ash | Thought Archive</title>
	<meta name="description" content="Writing about probability & Bayesian inference, data visualization, puzzles & games, finance, and books">	
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="theme/css/main.css">

	<!-- favicon -->
	<link href="data:image/x-icon;base64,AAABAAEAEBAAAAAAAABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAHwAAABcAAAAjAAAANAAAABQAAAAJAAAAAAAAAAAAAACxAAAA7QAAAJwAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAKwAAADdAAAA7wAAAPcAAADuAAAAxwAAAJcAAAA7AAAA/wAAAP4AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAEgAAADPAAAA/gAAAP8AAAD/AAAA/gAAAP8AAAD/AAAA/AAAAP8AAAD/AAAAwgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMwAAAPkAAAD9AAAA/wAAAP8AAAD+AAAA/wAAAP8AAAD/AAAA4AAAAEYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWAAAAQAAAAFgAAACMAAAA+AAAAP8AAAD/AAAA/wAAAP8AAAD/AAAAMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAGQAAAMUAAAD/AAAA/wAAAP8AAAD/AAAA/wAAAJsAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADMAAAAswAAAHsAAAD/AAAA/wAAAP8AAAD+AAAAaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeAAAAAAAAAAAAAAAgwAAAP8AAAD+AAAA/gAAAN8AAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAADAAAAA/wAAAP8AAAD/AAAAVwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGQAAALMAAAD/AAAA/wAAAKIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAATgAAAI4AAABOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8AAP//AAD//wAA/48AAICPAACADwAAwB8AAPgPAAD8BwAA/IcAAP+DAAD/wwAA/+EAAP/7AAD//wAA//8AAA==" rel="icon" type="image/x-icon" />
	
	<!-- Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-122705782-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	  gtag('config', 'UA-122705782-1');
	</script>

  </head>
  <body>
    
<nav class="navbar navbar-expand-sm navbar-light bg-white sticky-top">
  
  <div class="container">
  <a class="navbar-brand" href="/index">Jason Ash</a>
  
  <button class="navbar-toggler mt-1" type="button" data-toggle="collapse" data-target="#navbarNav">
        <i class="fa fa-bars"></i>
    </button>
  

  

  <div class="collapse navbar-collapse" id="navbarNav"> 
    <ul class="navbar-nav ml-auto">
      <li class="nav-item mr-4">
        <a class="nav-link" href="/index">Writing</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="/resume" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Resume
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
          <a class="dropdown-item" href="/resume">View</a>
          <a class="dropdown-item" href="/resume.pdf" target="_blank">Download</a>
        </div>
      </li>
    </ul>
  </div>  
  </div>
  
</nav>    
    <div class="container" style="min-height:88vh">
<div class="row justify-content-center">
  <div class="col-md-8">
  
    <div class="row mt-5">
      <div class="col">
        <div class="d-flex justify-content-between align-items-baseline mb-4">
          <h1>Riddler Gematria</h1>
          <label class="text-muted">Jan 10, 2020</label>
        </div>
        <div class="mb-5">
          <p><h5>Introduction</h5>
<p>Gematria is a numerical system that links Hebrew characters to numbers. This week's <a href="https://fivethirtyeight.com/features/can-you-find-a-number-worth-its-weight-in-letters/">Riddler Classic</a> explores the "score" of a number, and asks us to identify any patterns that emerge.</p>
<blockquote>
<p>In Jewish study, “Gematria” is an alphanumeric code where words are assigned numerical values based on their letters. We can do the same in English, assigning 1 to the letter A, 2 to the letter B, and so on, up to 26 for the letter Z. The value of a word is then the sum of the values of its letters. For example, RIDDLER has an alphanumeric value of 70, since R + I + D + D + L + E + R becomes 18 + 9 + 4 + 4 + 12 + 5 + 18 = 70.
<br><br>
But what about the values of different numbers themselves, spelled out as words? The number 1 (ONE) has an alphanumeric value of 15 + 14 + 5 = 34, and 2 (TWO) has an alphanumeric value of 20 + 23 + 15 = 58. Both of these values are bigger than the numbers themselves.
<br><br>
Meanwhile, if we look at larger numbers, 1,417 (ONE THOUSAND FOUR HUNDRED SEVENTEEN) has an alphanumeric value of 379, while 3,140,275 (THREE MILLION ONE HUNDRED FORTY THOUSAND TWO HUNDRED SEVENTY FIVE) has an alphanumeric value of 718. These values are much smaller than the numbers themselves.
<br><br>
If we consider all the whole numbers that are less than their alphanumeric value, what is the largest of these numbers?</p>
</blockquote>
<h5>Solution</h5>
<p>The lucky number for this weeks solution is <strong>279</strong>. With a score of 284, it is the largest integer that doesn't exceed its score. </p>
<p><img class="img-fluid mx-auto d-block" src="../images/20200110-riddler1.png"></p>
<p>If we test the first million numbers we see clear patterns emerge (well, maybe not crystal clear because rendering a million points doesn't make for the sharpest image.) The cyclical shape tends to range between values of 500-700 for most of the numbers up to one million.</p>
<p><img class="img-fluid mx-auto d-block" src="../images/20200110-riddler2.png"></p>
<h5>Full Code</h5>
<p>Lots of static dictionaries and testing in this code, which make it appear longer than it really is. In reality, the two short class methods, <code>Number.spell</code> and <code>Number.score</code> are the heavy-lifters, and they run very quickly! It takes just less than one second to run the first hundred thousand numbers.</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">doctest</span>


<span class="k">class</span> <span class="nc">Number</span><span class="p">(</span><span class="nb">int</span><span class="p">):</span>

    <span class="n">letter_score</span> <span class="o">=</span> <span class="s2">&quot; abcdefghijklmnopqrstuvwxyz&quot;</span>
    <span class="n">letter_score</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">v</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">letter_score</span><span class="p">)}</span>
    <span class="n">spelling</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">0</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;one&quot;</span><span class="p">,</span>
        <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span>
        <span class="mi">3</span><span class="p">:</span> <span class="s2">&quot;three&quot;</span><span class="p">,</span>
        <span class="mi">4</span><span class="p">:</span> <span class="s2">&quot;four&quot;</span><span class="p">,</span>
        <span class="mi">5</span><span class="p">:</span> <span class="s2">&quot;five&quot;</span><span class="p">,</span>
        <span class="mi">6</span><span class="p">:</span> <span class="s2">&quot;six&quot;</span><span class="p">,</span>
        <span class="mi">7</span><span class="p">:</span> <span class="s2">&quot;seven&quot;</span><span class="p">,</span>
        <span class="mi">8</span><span class="p">:</span> <span class="s2">&quot;eight&quot;</span><span class="p">,</span>
        <span class="mi">9</span><span class="p">:</span> <span class="s2">&quot;nine&quot;</span><span class="p">,</span>
        <span class="mi">10</span><span class="p">:</span> <span class="s2">&quot;ten&quot;</span><span class="p">,</span>
        <span class="mi">11</span><span class="p">:</span> <span class="s2">&quot;eleven&quot;</span><span class="p">,</span>
        <span class="mi">12</span><span class="p">:</span> <span class="s2">&quot;twelve&quot;</span><span class="p">,</span>
        <span class="mi">13</span><span class="p">:</span> <span class="s2">&quot;thirteen&quot;</span><span class="p">,</span>
        <span class="mi">14</span><span class="p">:</span> <span class="s2">&quot;fourteen&quot;</span><span class="p">,</span>
        <span class="mi">15</span><span class="p">:</span> <span class="s2">&quot;fifteen&quot;</span><span class="p">,</span>
        <span class="mi">16</span><span class="p">:</span> <span class="s2">&quot;sixteen&quot;</span><span class="p">,</span>
        <span class="mi">17</span><span class="p">:</span> <span class="s2">&quot;seventeen&quot;</span><span class="p">,</span>
        <span class="mi">18</span><span class="p">:</span> <span class="s2">&quot;eighteen&quot;</span><span class="p">,</span>
        <span class="mi">19</span><span class="p">:</span> <span class="s2">&quot;nineteen&quot;</span><span class="p">,</span>
        <span class="mi">20</span><span class="p">:</span> <span class="s2">&quot;twenty&quot;</span><span class="p">,</span>
        <span class="mi">30</span><span class="p">:</span> <span class="s2">&quot;thirty&quot;</span><span class="p">,</span>
        <span class="mi">40</span><span class="p">:</span> <span class="s2">&quot;forty&quot;</span><span class="p">,</span>
        <span class="mi">50</span><span class="p">:</span> <span class="s2">&quot;fifty&quot;</span><span class="p">,</span>
        <span class="mi">60</span><span class="p">:</span> <span class="s2">&quot;sixty&quot;</span><span class="p">,</span>
        <span class="mi">70</span><span class="p">:</span> <span class="s2">&quot;seventy&quot;</span><span class="p">,</span>
        <span class="mi">80</span><span class="p">:</span> <span class="s2">&quot;eighty&quot;</span><span class="p">,</span>
        <span class="mi">90</span><span class="p">:</span> <span class="s2">&quot;ninety&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">spell</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert an integer into a spelled word, e.g. 42 -&gt; forty two</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; spell = Number.spell</span>
<span class="sd">        &gt;&gt;&gt; spell(18)</span>
<span class="sd">        &#39;eighteen&#39;</span>
<span class="sd">        &gt;&gt;&gt; spell(61)</span>
<span class="sd">        &#39;sixty one&#39;</span>
<span class="sd">        &gt;&gt;&gt; spell(100)</span>
<span class="sd">        &#39;one hundred&#39;</span>
<span class="sd">        &gt;&gt;&gt; spell(118)</span>
<span class="sd">        &#39;one hundred eighteen&#39;</span>
<span class="sd">        &gt;&gt;&gt; spell(178)</span>
<span class="sd">        &#39;one hundred seventy eight&#39;</span>
<span class="sd">        &gt;&gt;&gt; spell(999)</span>
<span class="sd">        &#39;nine hundred ninety nine&#39;</span>
<span class="sd">        &gt;&gt;&gt; spell(10018)</span>
<span class="sd">        &#39;ten thousand eighteen&#39;</span>
<span class="sd">        &gt;&gt;&gt; spell(78123)</span>
<span class="sd">        &#39;seventy eight thousand one hundred twenty three&#39;</span>
<span class="sd">        &gt;&gt;&gt; spell(987654)</span>
<span class="sd">        &#39;nine hundred eighty seven thousand six hundred fifty four&#39;</span>
<span class="sd">        &gt;&gt;&gt; spell(118406714)</span>
<span class="sd">        &#39;one hundred eighteen million four hundred six thousand seven hundred fourteen&#39;</span>
<span class="sd">        &gt;&gt;&gt; spell(12000000012)</span>
<span class="sd">        &#39;twelve billion twelve&#39;</span>
<span class="sd">        &gt;&gt;&gt; spell(1000000000000)</span>
<span class="sd">        Traceback (most recent call last):</span>
<span class="sd">        ValueError: Unable to convert numbers larger than 999,999,999,999</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">spelling</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;{cls.spell((n // 10) * 10)} {cls.spell(n % 10)}&quot;</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mf">1e3</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;{cls.spell(n // 100)} hundred {cls.spell(n % 100)}&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mf">1e6</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;{cls.spell(n // 1e3)} thousand {cls.spell(n </span><span class="si">% 1e</span><span class="s2">3)}&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mf">1e9</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;{cls.spell(n // 1e6)} million {cls.spell(n </span><span class="si">% 1e</span><span class="s2">6)}&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mf">1e12</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;{cls.spell(n // 1e9)} billion {cls.spell(n </span><span class="si">% 1e</span><span class="s2">9)}&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unable to convert numbers larger than 999,999,999,999&quot;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">score</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the &#39;score&#39; of an integer, where score is calculed by spelling</span>
<span class="sd">        the word (e.g. 42 becomes &#39;forty two&#39;), then assigning a value to each</span>
<span class="sd">        of the characters (a=1, b=2, c=3, ..., z=26) and adding them up.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; score = Number.score</span>
<span class="sd">        &gt;&gt;&gt; score(2)</span>
<span class="sd">        58</span>
<span class="sd">        &gt;&gt;&gt; score(42)</span>
<span class="sd">        142</span>
<span class="sd">        &gt;&gt;&gt; score(1417)</span>
<span class="sd">        379</span>
<span class="sd">        &gt;&gt;&gt; score(3140275)</span>
<span class="sd">        718</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">letter_score</span><span class="p">[</span><span class="n">letter</span><span class="p">]</span> <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">spell</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">()</span>

    <span class="c1"># sample generator for the scores of the first 100,000 integers</span>
    <span class="n">scores</span> <span class="o">=</span> <span class="p">(</span><span class="n">Number</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">))</span>
</pre></div></p>
        </div>
      </div>
    </div>

  </div>
</div>
    </div>     
    
<footer class="footer text-muted">
  <div class="container">    
    <p>
      Built with <a href="https://blog.getpelican.com/" target="_blank">Pelican</a> and <a href="https://getbootstrap.com/docs/4.0/getting-started/introduction/" target="_blank">Bootstrap</a>.
      <br>
      &copy; 2020 Jason Ash. All rights reserved.
    </p>
  </div>
</footer>	
	<!-- mathjax -->
    <script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-MML-AM_CHTML"></script>
  
    <!-- optional scripts -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    
  
  </body>
</html>